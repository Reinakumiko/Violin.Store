
@{
	Layout = "~/Views/Shared/_LayoutHeaderSection.cshtml";
	ViewBag.Title = "用户注册";
}

<link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
<script src="~/Scripts/base64.js"></script>

<div class="container">
    <form class="form-horizontal" style="width: 450px; margin: 0px auto;">

        <div class="form-group">
            <span style="font-size: 135%;">
                用户登录
            </span>
        </div>
        <div class="form-group">
            <label for="account" class="col-sm-2 control-label">Account</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="account" placeholder="Account">
            </div>
        </div>
        <div class="form-group">
            <label for="email" class="col-sm-2 control-label">Email</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="email" placeholder="123@abc.com">
            </div>
        </div>
        <div class="form-group">
            <label for="nickname" class="col-sm-2 control-label">Nickname</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="nickname" placeholder="nickname">
            </div>
        </div>
        <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
            <div class="col-sm-10">
                <input type="password" class="form-control" id="password" placeholder="Password">
            </div>
        </div>
        <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">Re-Password</label>
            <div class="col-sm-10">
                <input type="password" class="form-control" id="repassword" placeholder="Re-password">
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button id="loginAccount" type="button" class="btn btn-primary" onclick="Register()">Sign up</button>
            </div>
        </div>
    </form>
</div>

<script>
    function Register() {
        var pass = $("#password").val();
        var repass = $("#repassword").val();

        if (pass != repass) {
            alert("重复密码必须相同。");
            return;
        }

        var acc = $("#account").val();
        var email = $("#email").val();
        var nick = $("#nickname").val();

        var obj = {
            Account: acc,
            Password: pass,
            Nickname: nick,
            EmailAddress: email,
        };

        $.post("Register", obj, function (data) {
            if (data.result)
            {
                location.href = "Login";
                return;
            }

            alert(data.msg);
        }, "json");
    }
</script>